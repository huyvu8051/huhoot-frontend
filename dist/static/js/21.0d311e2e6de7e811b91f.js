webpackJsonp([21],{Lnqc:function(e,t){},hFDE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("DmT9"),r=n.n(o),c={data:function(){return{socket:{},connected:!1}},created:function(){this.socket=this.connectSocket(),this.registerEvent(this.socket)},beforeDestroy:function(){this.removeSocketListener(this.socket)},methods:{connectSocket:function(){var e=this,t=r.a.connect(this.$socketUrl);return t.on("connected",function(e){console.log(e)}).emit("registerHostSocket",{challengeId:this.$route.query.challengeId,token:this.$store.state.token}),t.on("registerSuccess",function(t){console.log("challenge ",t),e.challenge=t,e.connected=!0}),t.on("joinError",function(t){e.$eventBus.$emit("nofication",{message:"Cann't connect to room!!!",status:"error"}),e.$router.push({name:"HOST"}).catch(function(e){return e})}),t},registerEvent:function(e){var t=this;e.on("startChallenge",function(){t.$router.push({name:"host.start",query:{challengeId:t.$route.query.challengeId}}).catch(function(e){return e})}),e.on("publishQuestion",function(e){t.$store.commit("publishExam",e),t.$router.push({name:"host.ready",query:{challengeId:t.$route.query.challengeId,questionId:t.$store.state.question.id}}).catch(function(e){return e})}),e.on("showCorrectAnswer",function(e){t.$store.commit("setAnswers",e.answers),t.$router.push({name:"host.show",query:{challengeId:t.$route.query.challengeId,questionId:t.$route.query.questionId}}).catch(function(e){return e})}),e.on("studentAnswer",function(){t.$store.commit("aStudentSubmitedAnswer")}),e.on("endChallenge",function(){t.$router.push({name:"host.finish",query:{challengeId:t.$route.query.challengeId}}).catch(function(e){return e})})},removeSocketListener:function(e){e.off("connected"),e.off("registerSuccess"),e.off("joinError"),e.off("startChallenge"),e.off("publishQuestion"),e.off("showCorrectAnswer"),e.off("endChallenge")}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-main",[t("h-flex-layout",[t("router-view",{attrs:{connected:this.connected}})],1)],1)},staticRenderFns:[]};var u=n("VU/8")(c,s,!1,function(e){n("Lnqc")},null,null);t.default=u.exports}});
//# sourceMappingURL=21.0d311e2e6de7e811b91f.js.map