webpackJsonp([28],{c5es:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("woOf"),s=n.n(i),a=n("cWFF"),o=n("y/UO"),r=n("ESwS"),d=n("+cKO"),l={components:{OpenChallenge:o.a},mixins:[r.validationMixin],validations:{editedItem:{username:{required:d.required,maxLength:Object(d.maxLength)(15),startWith:function(t){return/^(admin).*$/.test(t)}}}},data:function(){return{showErrorDialog:!1,dialog:!1,dialogDelete:!1,dialogReset:!1,headers:[{text:"Id",value:"id",align:"start",sortable:!0},{text:"Username",value:"username"},{text:"Created date",value:"createdDate"},{text:"Created by",value:"createdBy"},{text:"Modified date",value:"modifiedDate"},{text:"Modified by",value:"modifiedBy"},{text:"Non locked",value:"isNonLocked"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{id:0,username:"",isNonLocked:!0},defaultItem:{id:0,username:"",isNonLocked:!0},totalDesserts:0,loading:!0,options:{}}},computed:{usernameErrors:function(){var t=[];return this.$v.editedItem.username.$dirty?(!this.$v.editedItem.username.required&&t.push("Username required!"),!this.$v.editedItem.username.maxLength&&t.push("Username must less than 15"),!this.$v.editedItem.username.startWith&&t.push("Username must start with 'admin'"),t):t},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()},options:{handler:function(){this.getDataFromApi()},deep:!0}},methods:{editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=s()({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=s()({},t),this.dialogDelete=!0},deleteItemConfirm:function(){var t=this;this.loading=!0,a.a.updateHost(s()(this.editedItem,{isNonLocked:!1})).catch(console.log).finally(function(){t.loading=!1,t.getDataFromApi()}),this.closeDelete(),this.loading=!1},close:function(){var t=this;this.dialog=!1,this.$nextTick(function(){t.editedItem=s()({},t.defaultItem),t.editedIndex=-1})},closeDelete:function(){var t=this;this.dialogReset=!1,this.dialogDelete=!1,this.$nextTick(function(){t.editedItem=s()({},t.defaultItem),t.editedIndex=-1})},save:function(){var t=this;this.$v.$touch(),this.$v.$anyError||(this.loading=!0,this.editedIndex>-1?a.a.updateHost(s()({},this.editedItem)).finally(function(){t.showAddErrorDialog(),t.loading=!1,t.getDataFromApi()}):a.a.addHost([s()({},this.editedItem)]).then(function(e){console.log("cc",e.data),e.data.length>0&&t.$eventBus.$emit("nofication",{message:"Add error",status:"error"})}).catch(console.log).finally(function(){t.loading=!1,t.getDataFromApi()}),this.close())},getDataFromApi:function(){var t=this;this.loading=!0,console.log(this.options),a.a.findAllHost(this.options).then(function(e){console.log(e.data),t.desserts=e.data.list,t.totalDesserts=e.data.totalElements}).catch(console.log).finally(this.loading=!1)},resetPasswordConfirm:function(){var t=this;console.log("reset",this.editedItem),a.a.resetPasswordAdmin([this.editedItem.id]).then(function(e){t.$eventBus.$emit("nofication",{message:"Reset password success"})}).finally(function(){t.dialogReset=!1})},reset:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=s()({},t),this.dialogReset=!0},showAddErrorDialog:function(){this.showErrorDialog=!0}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,options:t.options,"server-items-length":t.totalDesserts,loading:t.loading,"footer-props":{"items-per-page-options":[5,10,20,30,50,100,{text:"All",value:999}]},"multi-sort":""},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("List Host")]),t._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[t._v("\n              New Item\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),t._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Username",counter:"15","error-messages":t.usernameErrors,required:"",id:"username-input"},on:{input:function(e){return t.$v.editedItem.username.$touch()},blur:function(e){return t.$v.editedItem.username.$touch()}},model:{value:t.editedItem.username,callback:function(e){t.$set(t.editedItem,"username",e)},expression:"editedItem.username"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-switch",{attrs:{label:"Non locked"},model:{value:t.editedItem.isNonLocked,callback:function(e){t.$set(t.editedItem,"isNonLocked",e)},expression:"editedItem.isNonLocked"}})],1)],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("\n                Cancel\n              ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v("\n              Are you sure you want to delete this item?\n            ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("\n                Cancel\n              ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("\n                OK\n              ")]),t._v(" "),n("v-spacer")],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogReset,callback:function(e){t.dialogReset=e},expression:"dialogReset"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v("\n              Are you sure you want to reset password for this item?\n            ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("\n                Cancel\n              ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.resetPasswordConfirm}},[t._v("\n                OK\n              ")]),t._v(" "),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(i)}}},[t._v(" mdi-pencil ")]),t._v(" "),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.reset(i)}}},[t._v(" lock_reset ")]),t._v(" "),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(i)}}},[t._v("\n        mdi-delete\n      ")])]}},{key:"no-data",fn:function(){return[n("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.getDataFromApi()}}},[t._v(" Reset ")])]},proxy:!0},{key:"item.createdDate",fn:function(t){var e=t.item;return[n("h-date-formater",{attrs:{date:e.createdDate}})]}},{key:"item.modifiedDate",fn:function(t){var e=t.item;return[n("h-date-formater",{attrs:{date:e.modifiedDate}})]}}],null,!0)})],1)},staticRenderFns:[]},u=n("VU/8")(l,c,!1,null,null,null);e.default=u.exports},cWFF:function(t,e,n){"use strict";var i=n("w8lG");e.a={findAllStudent:function(t){return Object(i.a)().post("admin/student/findAll",t)},updateStudent:function(t){return Object(i.a)().patch("admin/student",t)},resetPasswordStudent:function(t){return Object(i.a)().post("admin/resetPasswordStudent",t)},addStudent:function(t){return Object(i.a)().post("admin/student",t)},addManyStudent:function(t){return Object(i.a)().post("admin/manyStudent",t)},findAllHost:function(t){return Object(i.a)().post("admin/host/findAll",t)},addHost:function(t){return Object(i.a)().post("admin/host",t)},updateHost:function(t){return Object(i.a)().patch("admin/host",t)},resetPasswordAdmin:function(t){return Object(i.a)().post("admin/resetPasswordAdmin",t)}}}});
//# sourceMappingURL=28.eb91c06d21287a0f701f.js.map