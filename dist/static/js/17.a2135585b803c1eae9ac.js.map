{"version":3,"sources":["webpack:///src/components/organize/Organize.vue","webpack:///./src/components/organize/Organize.vue?9b6c","webpack:///./src/components/organize/Organize.vue"],"names":["Organize","components","FlexLayout","data","challenge","socket","question","answers","studentAnswered","ready","created","currName","this","$router","currentRoute","name","challengeId","$route","query","joinChallenge","console","log","connectSocket","registerEvent","beforeDestroy","removeEventBusListener","removeSocketListener","methods","targetName","push","catch","err","_this","socketUrl","$socketUrl","lib_default","a","connect","on","emit","token","$store","state","$eventBus","$emit","message","status","_this2","questionId","id","$on","_ref","off","$off","organize_Organize","render","_h","$createElement","_c","_self","attrs","theLastQuestion","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.a2135585b803c1eae9ac.js","sourcesContent":["<template>\n  <v-main>\n    <FlexLayout>\n      <router-view\n        :challenge=\"challenge\"\n        :socket=\"socket\"\n        :question=\"question\"\n        :answers=\"answers\"\n        :studentAnswered=\"studentAnswered\"\n        :theLastQuestion=\"question.theLastQuestion\"\n        :ready=\"ready\"\n      />\n    </FlexLayout>\n  </v-main>\n</template>\n\n<script>\nimport FlexLayout from \"@/components/FlexLayout\";\nimport io from \"socket.io-client\";\nexport default {\n  components: { FlexLayout },\n  data() {\n    return {\n      challenge: {},\n      socket: {},\n      question: {},\n      answers: [],\n      studentAnswered: 0,\n      ready: false,\n    };\n  },\n\n  created() {\n    var currName = this.$router.currentRoute.name;\n    var challengeId = this.$route.query.challengeId;\n\n    this.joinChallenge(challengeId, currName);\n\n    console.log(\"after join chall\");\n\n    this.socket = this.connectSocket();\n    this.registerEvent(this.socket);\n  },\n  beforeDestroy() {\n    this.removeEventBusListener();\n    this.removeSocketListener(this.socket);\n  },\n  methods: {\n    joinChallenge(challengeId, currName) {\n      console.log(\"currName\", currName);\n\n      var targetName = currName;\n\n      switch (currName) {\n        case \"host.ready\":\n        case \"host.preview\":\n        case \"host.ask\":\n          targetName = \"host.reAsk\"; // err\n          this.$router\n            .push({\n              name: targetName,\n              query: {\n                challengeId: challengeId,\n              },\n            })\n            .catch((err) => err);\n\n          return;\n        case \"host.get\":\n          targetName = \"host.wait\";\n          break;\n        case \"host.show\":\n          targetName = \"host.organize.rank\";\n          break;\n        default:\n          break;\n      }\n      this.$router\n        .push({\n          name: targetName,\n          query: {\n            challengeId: challengeId,\n          },\n        })\n        .catch((err) => err);\n    },\n    connectSocket() {\n      const socketUrl = this.$socketUrl;\n      var socket = io.connect(socketUrl);\n      socket\n        .on(\"connected\", (data) => {\n          console.log(data);\n        })\n        .emit(\"registerHostSocket\", {\n          challengeId: this.$route.query.challengeId,\n          token: this.$store.state.token,\n        });\n\n      socket.on(\"registerSuccess\", (data) => {\n        // console.log(\"challenge \", data);\n        this.challenge = data;\n        this.ready = true;\n      });\n\n      socket.on(\"joinError\", (data) => {\n        this.$eventBus.$emit(\"nofication\", {\n          message: \"Cann't connect to room!!!\",\n          status: \"error\",\n        });\n        this.$router\n          .push({\n            name: \"HOST\",\n          })\n          .catch((err) => err);\n      });\n\n      return socket;\n    },\n    registerEvent(socket) {\n      socket.on(\"startChallenge\", () => {\n        this.$router\n          .push({\n            name: \"host.start\",\n            query: {\n              challengeId: this.$route.query.challengeId,\n            },\n          })\n          .catch((err) => err);\n      });\n      socket.on(\"publishQuestion\", (data) => {\n        this.question = data.question;\n        this.answers = data.answers;\n        this.studentAnswered = 0;\n\n        this.$router\n          .push({\n            name: \"host.ready\",\n            query: {\n              challengeId: this.$route.query.challengeId,\n              questionId: this.question.id,\n            },\n          })\n          .catch((err) => err);\n      });\n\n      socket.on(\"showCorrectAnswer\", (data) => {\n        this.answers = data.answers;\n\n        console.log(this.answers);\n\n        this.$router\n          .push({\n            name: \"host.show\",\n            query: {\n              challengeId: this.$route.query.challengeId,\n              questionId: this.$route.query.questionId,\n            },\n          })\n          .catch((err) => err);\n      });\n\n      socket.on(\"studentAnswer\", () => {\n        this.studentAnswered++;\n        console.log(this.studentAnswered);\n      });\n      socket.on(\"endChallenge\", () => {\n        this.$router\n          .push({\n            name: \"host.finish\",\n            query: {\n              challengeId: this.$route.query.challengeId,\n            },\n          })\n          .catch((err) => err);\n      });\n\n      this.$eventBus.$on(\"reAsk\", ({ question, answers }) => {\n        this.question = question;\n        this.answers = answers;\n        this.$router\n          .push({\n            name: \"host.ask\",\n            query: {\n              challengeId: this.$route.query.challengeId,\n              questionId: this.question.id,\n            },\n          })\n          .catch((err) => err);\n      });\n    },\n    removeSocketListener(socket) {\n      socket.off(\"connected\");\n      socket.off(\"registerSuccess\");\n      socket.off(\"joinError\");\n      socket.off(\"startChallenge\");\n      socket.off(\"publishQuestion\");\n      socket.off(\"showCorrectAnswer\");\n      socket.off(\"endChallenge\");\n    },\n    removeEventBusListener() {\n      this.$eventBus.$off(\"reAsk\");\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/organize/Organize.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-main',[_c('FlexLayout',[_c('router-view',{attrs:{\"challenge\":_vm.challenge,\"socket\":_vm.socket,\"question\":_vm.question,\"answers\":_vm.answers,\"studentAnswered\":_vm.studentAnswered,\"theLastQuestion\":_vm.question.theLastQuestion,\"ready\":_vm.ready}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b704b2bc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/organize/Organize.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b704b2bc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Organize.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Organize.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Organize.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b704b2bc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Organize.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/organize/Organize.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}